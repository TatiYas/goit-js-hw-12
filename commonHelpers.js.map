{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\nconst baseURL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(searchQuery, page) {\n  const response = await axios(baseURL, {\n    params: {\n      key: '43244566-bb96021fc186f0172f7edc4d3',\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 15,\n    },\n  });\n  return response.data;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api';\n\nconst galleryElement = document.querySelector('.gallery');\nconst searchForm = document.querySelector('.form');\nconst inputElement = document.querySelector('.search-input');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet searchTerm = '';\nlet pageCounter = 1;\nconst perPage = 15;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nsearchForm.addEventListener('submit', submitHandle);\n\nasync function submitHandle(event) {\n  event.preventDefault();\n  searchTerm = inputElement.value.trim();\n  pageCounter = 1;\n  galleryElement.innerHTML = '';\n\n  if (!searchTerm) {\n    showError('The field can not be empty!');\n    return;\n  }\n\n  hideEndMessage();\n  showLoader();\n\n  try {\n    const images = await fetchImages(searchTerm, pageCounter, perPage);\n    const totalHits = images.totalHits;\n\n    if (!images.hits.length) {\n      showError('Sorry, there are no images matching your search query. Please try again!');\n      return;\n    }\n\n    renderPic(images.hits);\n    inputElement.value = '';\n    showLoadMoreBtn();\n\n    if (perPage * pageCounter >= totalHits) {\n      hideLoadMoreBtn();\n      showEndMessage();\n    }\n  } catch (error) {\n    showError('Failed to fetch images. Please try again later.');\n    console.error('Error:', error);\n  } finally {\n    hideLoader();\n  }\n}\n\nloadMoreBtn.addEventListener('click', async () => {\n  try {\n    pageCounter += 1;\n    const images = await fetchImages(searchTerm, pageCounter, perPage);\n    const totalHits = images.totalHits;\n\n    renderPic(images.hits);\n    showLoader();\n\n    if (perPage * pageCounter >= totalHits) {\n      hideLoadMoreBtn();\n      showEndMessage();\n    }\n\n    smoothScrollToNextGroup();\n  } catch (error) {\n    showError(`Error fetching more images: ${error}`);\n    console.error('Error fetching more images:', error);\n  } finally {\n    hideLoader();\n  }\n});\n\nfunction renderPic(data) {\n  galleryElement.insertAdjacentHTML('beforeend', generateMarkup(data));\n  lightbox.refresh();\n}\n\nfunction generateMarkup(data) {\n  return data.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <li class=\"card\">\n      <a href=\"${largeImageURL}\" class=\"link\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\">\n        <ul class=\"list-container\">\n          <li class=\"item-description\"><h3>Likes</h3> <p>${likes}</p></li>\n          <li class=\"item-description\"><h3>Views</h3> <p>${views}</p></li>\n          <li class=\"item-description\"><h3>Comments</h3> <p>${comments}</p></li>\n          <li class=\"item-description\"><h3>Downloads</h3> <p>${downloads}</p></li>\n        </ul>\n      </a>\n    </li>\n  `).join('');\n}\n\nfunction showEndMessage() {\n  const endMessage = document.createElement('p');\n  endMessage.classList.add('end-message');\n  endMessage.textContent = \"We're sorry, but you've reached the end of search results.\";\n  galleryElement.insertAdjacentElement('afterend', endMessage);\n}\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.style.display = 'block';\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.style.display = 'none';\n}\n\nfunction hideEndMessage() {\n  const endMessage = document.querySelector('.end-message');\n  if (endMessage) {\n    endMessage.remove();\n  }\n}\n\nfunction showError(message) {\n  iziToast.error({\n    message,\n    messageColor: '#fff',\n    backgroundColor: '#ef4040',\n    position: 'bottomRight',\n    messageSize: '14px',\n    messageLineHeight: '100%',\n    iconColor: 'grey',\n    title: 'Error',\n  });\n}\n\nfunction smoothScrollToNextGroup() {\n  const firstGalleryItem = document.querySelector('.gallery a');\n  if (firstGalleryItem) {\n    const galleryItemHeight = firstGalleryItem.getBoundingClientRect().height;\n    window.scrollBy({\n      top: galleryItemHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["baseURL","fetchImages","searchQuery","page","axios","galleryElement","searchForm","inputElement","loader","loadMoreBtn","searchTerm","pageCounter","perPage","lightbox","SimpleLightbox","submitHandle","event","showError","hideEndMessage","showLoader","images","totalHits","renderPic","showLoadMoreBtn","hideLoadMoreBtn","showEndMessage","error","hideLoader","smoothScrollToNextGroup","data","generateMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","endMessage","message","iziToast","firstGalleryItem","galleryItemHeight"],"mappings":"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"}